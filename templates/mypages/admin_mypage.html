<!doctype html>
<html lang="ja">
<head>
    <title>ãƒã‚¤ãƒšãƒ¼ã‚¸</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/change-tab.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mypage-admin.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/logout.css') }}">
</head>
<body>
{% if logout %}
    {{ logout |safe}}
{% endif %}
<div id="user-page" class="container">
    <div id="header">
        <div id="titles">
            <h1>ãƒã‚¤ãƒšãƒ¼ã‚¸</h1>
            <div id="user_info">
                ã“ã‚“ã«ã¡ã¯ã€<b>{{ User_code }}  {{ User_name }}</b>ã•ã‚“!
            </div>
        </div>
        <img src="{{ url_for("static",filename="images/kanrisya.png") }}" alt="">
    </div>
    <div id="body">
        <fieldset id="information">
            <legend><h3>ãŠçŸ¥ã‚‰ã›ï¼</h3></legend>
            {% if not is_completed_health %}
                <p id="is_completed_health">â˜†â˜†â˜†ä»Šæ—¥ã®å¥åº·è¨˜éŒ²ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„â˜†â˜†â˜†  >> <a href="/mypage:{{ User_code }}/edit/health">å…¥åŠ›ã™ã‚‹</a></p>
            {% endif %}

            {% if not is_completed_activity %}
                <p id="is_completed_activity">â˜†â˜†â˜†ä»Šæ—¥ã®è¡Œå‹•è¨˜éŒ²ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„â˜†â˜†â˜†  >> <a href="/mypage:{{ User_code }}/edit/activity">å…¥åŠ›ã™ã‚‹</a></p>
            {% endif %}

            {% if ( is_completed_health and is_completed_activity) %}
                <p>â˜†â˜†â˜†ãŠçŸ¥ã‚‰ã›ã¯ã‚ã‚Šã¾ã›ã‚“â˜†â˜†â˜†</p>
            {% endif %}
        </fieldset>
    <div id="controller">
        <div id="select_button">
            <button class="menuButton" data-menu="menu1">è¨˜å…¥</button>
            <div id="menu1" class="menu">
                {% if not is_completed_health %}
                    <a href="/mypage:{{ User_code }}/edit/health">å¥åº·è¨˜éŒ²è¡¨</a>
                {% endif %}
                <a href="/mypage:{{ User_code }}/edit/activity">è¡Œå‹•è¨˜éŒ²è¡¨</a>
                <a href="/mypage:{{ User_code }}/edit/infection">æ„ŸæŸ“è¨˜éŒ²è¡¨</a>
                <a href="/mypage:{{ User_code }}/edit/vaccine">ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨˜éŒ²è¡¨</a>
            </div>
            <button class="menuButton" data-menu="menu2">ç·¨é›†</button>
            <div id="menu2" class="menu">
                <a href="/mypage:{{ User_code }}/edit/update">ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ </a>
                <a href="/mypage:{{ User_code }}/edit/delete">ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤</a>
            </div>
            <button class="menuButton" onclick="location.href = '/mypage:{{ User_code }}/logout'">
                ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
            </button>
        </div>
        <div id="filter">
            <input type="text" readonly value="{{ session["target_data"]["User_code"][0] }}"/>
            <button id="filtter" class="menuButton" data-menu="menu3">ğŸ”</button>
            <div id="menu3" class="menu">
                <div class="form-group">
                    <label for="selectOption">å­¦ç±ç•ªå·</label>
                    {% for member in members_list %}
                        <a href="/fetch:{{ session["user_data"]["User_code"][0]}}" value="{{ member }}" class="a_members">{{ member }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    </div>
    <div id="logs-table">
        <div class="tab-wrap">
            <input id="health-tab" type="radio" name="TAB" class="tab-switch" checked />
            <label class="tab-label" for="health-tab">ä½“èª¿è¦³å¯Ÿè¡¨</label>
            <div class="tab-blank"></div>
            <div class="tab-content">
                <table>
                    <thead>
                    <tr>
                        <th>ä½“æ¸©</th>
                        <th>ç­‹è‚‰ç—›</th>
                        <th>ã ã‚‹ã•</th>
                        <th>é ­ç—›</th>
                        <th>å–‰ç—›</th>
                        <th>æ¯åˆ‡ã‚Œ</th>
                        <th>å’³ãƒ»ãã—ã‚ƒã¿</th>
                        <th>åãæ°—</th>
                        <th>è…¹ç—›</th>
                        <th>å‘³è¦šç•°å¸¸</th>
                        <th>å—…è¦šç•°å¸¸</th>
                        <th>è¨˜éŒ²æ—¥</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in health_data %}
                        <tr>
                            {% for cell in row %}
                                <td>
                                    {% if cell == "ã‚ã‚Š" %}
                                        <span style="color: red;"><b>{{ cell }}</b></span>
                                    {% else %}
                                        {{ cell }}
                                    {% endif %}
                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <input id="activity-tab" type="radio" name="TAB" class="tab-switch" />
            <label class="tab-label" for="activity-tab">è¡Œå‹•è¨˜éŒ²è¡¨</label>
            <div class="tab-blank"></div>
            <div class="tab-content">
                <table>
                    <thead>
                    <tr>
                        <th>é–‹å§‹æ™‚é–“</th>
                        <th>çµ‚äº†æ™‚é–“</th>
                        <th>å ´æ‰€</th>
                        <th>ç§»å‹•æ–¹æ³•</th>
                        <th>å‡ºç™ºåœ°</th>
                        <th>åˆ°ç€åœ°</th>
                        <th>åŒè¡Œè€…æ•°</th>
                        <th>ç‰¹è¨˜äº‹é …</th>
                        <th>è¨˜éŒ²æ—¥</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in activity_data %}
                        <tr>
                            {% for cell in row %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <input id="infection-tab" type="radio" name="TAB" class="tab-switch" />
            <label class="tab-label" for="infection-tab">æ„ŸæŸ“è¨˜éŒ²è¡¨</label>
            <div class="tab-blank"></div>
            <div class="tab-content">
                <table>
                    <thead>
                    <tr>
                        <th>å‡ºæ ¡åœæ­¢é–‹å§‹æ—¥</th>
                        <th>å‡ºæ ¡åœæ­¢çµ‚äº†æ—¥</th>
                        <th>å‡ºæ ¡åœæ­¢çŠ¶æ³</th>
                        <th>åŒ»ç™‚æ©Ÿé–¢å</th>
                        <th>åŒ»è€…å</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in infection_data %}
                        <tr>
                            {% for cell in row %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <input id="vaccine-tab" type="radio" name="TAB" class="tab-switch" />
            <label class="tab-label" for="vaccine-tab">ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨˜éŒ²è¡¨</label>
            <div class="tab-blank"></div>
            <div class="tab-content">
                <table>
                    <thead>
                    <tr>
                        <th>æ¥ç¨®æ—¥æ™‚</th>
                        <th>æ¥ç¨®ãƒ¯ã‚¯ãƒãƒ³å</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in vaccine_data %}
                        <tr>
                            {% for cell in row %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <input id="infected-tab" type="radio" name="TAB" class="tab-switch" />
            <label class="tab-label" for="infected-tab">æ„ŸæŸ“è€…ä¸€è¦§</label>
            <div class="tab-blank"></div>
            <div class="tab-content">
                <table>
                    <thead>
                    <tr>
                        <th>å­¦ç±ç•ªå·</th>
                        <th>æ°å</th>
                        <th>ç™ºç—‡æ—¥</th>
                        <th>å‡ºå¸­å¯èƒ½æ—¥</th>
                        <th>ç—…é™¢å</th>
                        <th>åŒ»å¸«å</th>
                        <th>ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®æœ‰ç„¡</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in infected %}
                        <tr>
                            {% for cell in row %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <input id="pre-infected-tab" type="radio" name="TAB" class="tab-switch" />
            <label class="tab-label" for="pre-infected-tab">æ„ŸæŸ“ã®ç–‘ã„ãŒã‚ã‚‹äºº</label>
            <div class="tab-blank"></div>
            <div class="tab-content">
                <table>
                    <thead>
                    <tr>
                        <th>å­¦ç±ç•ªå·</th>
                        <th>æ°å</th>
                        <th>ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®æœ‰ç„¡</th>
                        <th>ä½“æ¸©</th>
                        <th>ç—‡çŠ¶æ•°</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in pre_infected %}
                        <tr>
                            {% for cell in row %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
    </div>
</div>
<script>
    document.querySelectorAll('.menuButton').forEach(button => {
        button.addEventListener('click', function(event) {
            event.stopPropagation();
            var menuId = this.getAttribute('data-menu');
            var menu = document.getElementById(menuId);
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                document.querySelectorAll('.menu').forEach(m => m.style.display = 'none');
                menu.style.display = 'block';
            }
        });
    });

    document.addEventListener('click', function(event) {
        document.querySelectorAll('.menu').forEach(menu => {
            if (!menu.contains(event.target) && !event.target.matches('.menuButton')) {
                menu.style.display = 'none';
            }
        });
    });
    document.addEventListener("DOMContentLoaded",()=>{
        const a_members = document.querySelectorAll("a.a_members");
        a_members.forEach((a_member)=>{
            a_member.addEventListener("click",(e)=>{
                e.preventDefault();
                const value = e.target.innerText;
                const form = document.createElement('form');
                form.method = 'POST'; // or 'GET' depending on your needs
                form.action = '/fetch:{{ session["user_data"]["User_code"][0] }}'; // replace with your server endpoint URL

                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = 'filter_select';
                input.value = value;
                form.appendChild(input);

                document.body.appendChild(form);
                form.submit();
            })
        })
    })
</script>
</div>
</body>
</html>